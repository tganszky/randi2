<!-- 
 The Registration page.

 Made by lplotni@users.sourceforge.org  

 This file is part of RANDI2.
 RANDI2 is free software: you can redistribute it and or modify it under the
 terms of the GNU General Public License as published by the Free Software
 Foundation, either version 3 of the License, or (at your option) any later
 version.
 RANDI2 is distributed in the hope that it will be useful, but WITHOUT ANY
 WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 You should have received a copy of the GNU General Public License along with
 RANDI2. If not, see http://www.gnu.org/licenses/.
 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ice="http://www.icesoft.com/icefaces/component">
<h:head>
	<title><ui:insert name="title">
		<ice:outputText nospan="true" value="#{labels['pages.login.titel']}" />
	</ui:insert></title>
	<ice:outputStyle href="/xmlhttp/css/rime/rime.css" />
	<ice:outputStyle href="/RANDI2.css" />
</h:head>
<h:body>
	<div class="body">
	<div class="contentREGISTER"><ui:include
		src="/inc/popups/termsPopup.xhtml" /> <!-- The pages.registration Form  -->
	<ice:panelBorder renderEast="false" renderWest="false"
		rendered="#{randi2.selfRegistrationSupported}">
		<f:facet name="north">
			<ui:include src="/inc/version.xhtml" />
		</f:facet>
		<f:facet name="west">
		</f:facet>
		<f:facet name="east">
		</f:facet>
		<f:facet name="center">
			<ice:form id="registrationForm">
				<ice:panelTabSet>
					<ice:panelTab id="personalDetails"
						label="#{labels['pages.registration.tab1Header']}">
						<ice:panelGrid border="0" columns="2">
							<ice:graphicImage value="/img/icons/personal16.png" />
							<ice:outputLabel
								value="#{labels['pages.registration.personalHeader']}" />
						</ice:panelGrid>
						<ice:panelGrid>
							<ice:panelGrid columns="2">
								<ice:outputLabel for="gender" value="#{labels['person.gender']}" />
								<ice:selectOneMenu id="gender"
									value="#{loginHandler.newUser.person.sex}"
									converter="de.randi2.jsf.converters.GENDER_CONVERTER">
									<f:selectItems value="#{enums.genderItems}" />
								</ice:selectOneMenu>
							</ice:panelGrid>
							<ice:panelGrid border="0" columns="3" style="float:left">
								<ice:outputLabel for="userTitle"
									value="#{labels['person.title']}" />
								<ice:inputText id="userTitle"
									value="#{loginHandler.newUser.person.title}"
									required="#{loginHandler.newUser.person.requiredFields['title']}"
									partialSubmit="true">
									<f:validator
										validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
									<f:attribute name="dObject"
										value="#{loginHandler.newUser.person}" />
								</ice:inputText>
								<ice:message for="userTitle" id="userTitleError" styleClass="errorMsg"/>
								<ice:outputLabel for="firstname"
									value="#{labels['person.firstname']}" />
								<ice:inputText id="firstname"
									value="#{loginHandler.newUser.person.firstname}"
									required="#{loginHandler.newUser.person.requiredFields['firstname']}"
									partialSubmit="true">
									<f:validator
										validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
									<f:attribute name="dObject"
										value="#{loginHandler.newUser.person}" />
								</ice:inputText>
								<ice:message for="firstname" id="firstnameError" styleClass="errorMsg"/>
								<ice:outputLabel for="surname"
									value="#{labels['person.surname']}" />
								<ice:inputText id="surname"
									value="#{loginHandler.newUser.person.surname}"
									required="#{loginHandler.newUser.person.requiredFields['surname']}"
									partialSubmit="true">
									<f:validator
										validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
									<f:attribute name="dObject"
										value="#{loginHandler.newUser.person}" />
								</ice:inputText>
								<ice:message for="surname" id="surnameError" styleClass="errorMsg"/>
							</ice:panelGrid>
							<ice:panelGrid border="0" columns="2">
								<ice:graphicImage value="/img/icons/contact16.png" />
								<ice:outputLabel
									value="#{labels['pages.registration.contactHeader']}" />
							</ice:panelGrid>
							<ice:panelGrid>
								<ice:panelGroup>
									<ice:panelGrid border="0" columns="3">
										<ice:outputLabel for="email" value="#{labels['person.eMail']}" />
										<ice:inputText id="email"
											value="#{loginHandler.newUser.person.email}"
											required="#{loginHandler.newUser.person.requiredFields['email']}"
											partialSubmit="true">
											<f:validator
												validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
											<f:attribute name="dObject"
												value="#{loginHandler.newUser.person}" />
										</ice:inputText>
										<ice:message for="email" id="eMailError" styleClass="errorMsg"/>
										<ice:outputLabel for="phone" value="#{labels['person.phone']}" />
										<ice:inputText id="phone"
											value="#{loginHandler.newUser.person.phone}"
											required="#{loginHandler.newUser.person.requiredFields['phone']}"
											partialSubmit="true">
											<f:validator
												validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
											<f:attribute name="dObject"
												value="#{loginHandler.newUser.person}" />
										</ice:inputText>
										<ice:message for="phone" id="phoneError" styleClass="errorMsg"/>
										<ice:outputLabel for="mobile"
											value="#{labels['person.mobile']}" />
										<ice:inputText id="mobile"
											value="#{loginHandler.newUser.person.mobile}"
											required="#{loginHandler.newUser.person.requiredFields['mobile']}"
											partialSubmit="true">
											<f:validator
												validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
											<f:attribute name="dObject"
												value="#{loginHandler.newUser.person}" />
										</ice:inputText>
										<ice:message for="mobile" id="mobileError" styleClass="errorMsg"/>
										<ice:outputLabel for="fax" value="#{labels['person.fax']}" />
										<ice:inputText id="fax"
											value="#{loginHandler.newUser.person.fax}"
											required="#{loginHandler.newUser.person.requiredFields['fax']}"
											partialSubmit="true">
											<f:validator
												validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
											<f:attribute name="dObject"
												value="#{loginHandler.newUser.person}" />
										</ice:inputText>
										<ice:message for="fax" id="faxError" styleClass="errorMsg"/>
									</ice:panelGrid>
								</ice:panelGroup>
							</ice:panelGrid>
						</ice:panelGrid>
					</ice:panelTab>
					<ice:panelTab title="accountDetails" id="accountDetails"
						label="#{labels['pages.registration.tab2Header']}">
						<ice:panelGrid border="0" columns="2">
							<ice:graphicImage value="/img/icons/user16.png" />
							<ice:outputLabel
								value="#{labels['pages.registration.accountHeader']}" />
						</ice:panelGrid>
						<ice:panelGrid columns="2">
							<ice:outputLabel for="username"
								value="#{labels['login.username']}" />
							<ice:outputText id="username"
								value="#{loginHandler.newUser.person.email}" />
							<ice:outputLabel for="password"
								value="#{labels['login.password']}" />
							<ice:panelGrid columns="2" id="passwordGroup">
								<ice:inputSecret id="password"
									value="#{loginHandler.newUser.password}"
									required="#{loginHandler.newUser.requiredFields['password']}"
									redisplay="true" partialSubmit="true">
									<f:validator
										validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
									<f:attribute name="dObject" value="#{loginHandler.newUser}" />
								</ice:inputSecret>
								<ice:message for="password" id="passwordError" styleClass="errorMsg"/>
							</ice:panelGrid>
							<ice:outputLabel for="pConfirmation"
								value="#{labels['pages.registration.passwordConfirmation']}" />
							<ice:panelGrid columns="2">
								<ice:inputSecret id="pConfirmation"
									required="#{loginHandler.newUser.requiredFields['password']}"
									redisplay="true" partialSubmit="true">
									<f:validator
										validatorId="de.randi2.jsf.validators.PASSWORD_CONFIRMATION" />
								</ice:inputSecret>
								<ice:message for="pConfirmation" id="confirmationError" styleClass="errorMsg"/>
							</ice:panelGrid>
						</ice:panelGrid>
					</ice:panelTab>
					<ice:panelTab id="siteDetails"
						label="#{labels['pages.registration.tab3Header']}">
						<ice:panelGrid border="0" columns="2">
							<ice:graphicImage value="/img/icons/trialSite16.png" />
							<ice:outputLabel
								value="#{labels['pages.registration.institutionHeader']}" />
						</ice:panelGrid>
						<ice:panelGrid border="0" columns="3">
							<ice:outputLabel for="trialSite"
								value="#{labels['person.trialSite']}" />
							<ice:selectInputText id="trialSite"
								required="#{loginHandler.newUser.person.requiredFields['trialSite']}"
								valueChangeListener="#{loginHandler.trialSitesAC.updateObjectList}"
								rows="10" width="200">
								<f:selectItems value="#{loginHandler.trialSitesAC.objectList}" />
							</ice:selectInputText>
							<ice:message for="trialSite" id="trialSiteError" styleClass="errorMsg"/>
							<ice:outputLabel value="#{labels['person.assistant']}"
								rendered="#{loginHandler.trialSitesAC.objectSelected}" />
							<ice:selectBooleanCheckbox
								rendered="#{loginHandler.trialSitesAC.objectSelected}"
								value="#{registerPage.createAssistant}" partialSubmit="true" />
						</ice:panelGrid>
						<ice:panelGroup id="assistant"
							rendered="#{registerPage.createAssistant}"
							styleClass="icePnlClpsbl">
							<ice:panelGrid border="0" columns="2">
								<ice:graphicImage value="/img/icons/personal16.png" />
								<ice:outputLabel
									value="#{labels['pages.registration.personalHeader']}" />
							</ice:panelGrid>
							<ice:panelGrid>
								<ice:panelGrid columns="2">
									<ice:outputLabel for="assistant_gender"
										value="#{labels['person.gender']}" />
									<ice:selectOneMenu id="assistant_gender"
										value="#{loginHandler.newUser.person.assistant.sex}"
										converter="de.randi2.jsf.converters.GENDER_CONVERTER">
										<f:selectItems value="#{enums.genderItems}" />
									</ice:selectOneMenu>
								</ice:panelGrid>
								<ice:panelGrid border="0" columns="3" style="float:left">
									<ice:outputLabel for="assistant_title"
										value="#{labels['person.title']}" />
									<ice:inputText id="assistant_title"
										value="#{loginHandler.newUser.person.assistant.title}"
										required="#{loginHandler.newUser.person.requiredFields['title']}"
										partialSubmit="true">
										<f:validator
											validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
										<f:attribute name="dObject"
											value="#{loginHandler.newUser.person.assistant}" />
									</ice:inputText>
									<ice:message for="assistant_title" id="assistant_titelError" styleClass="errorMsg"/>
									<ice:outputLabel for="assistant_firstname"
										value="#{labels['person.firstname']}" />
									<ice:inputText id="assistant_firstname"
										value="#{loginHandler.newUser.person.assistant.firstname}"
										required="#{loginHandler.newUser.person.requiredFields['firstname']}"
										partialSubmit="true">
										<f:validator
											validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
										<f:attribute name="dObject"
											value="#{loginHandler.newUser.person.assistant}" />
									</ice:inputText>
									<ice:message for="assistant_firstname"
										id="assistant_firstnameError" styleClass="errorMsg"/>
									<ice:outputLabel for="assistant_surname"
										value="#{labels['person.surname']}" />
									<ice:inputText id="assistant_surname"
										value="#{loginHandler.newUser.person.assistant.surname}"
										required="#{loginHandler.newUser.person.requiredFields['surname']}"
										partialSubmit="true">
										<f:validator
											validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
										<f:attribute name="dObject"
											value="#{loginHandler.newUser.person.assistant}" />
									</ice:inputText>
									<ice:message for="assistant_surname"
										id="assistant_surnameError" styleClass="errorMsg"/>
								</ice:panelGrid>
								<ice:panelGrid border="0" columns="2">
									<ice:graphicImage value="/img/icons/contact16.png" />
									<ice:outputLabel
										value="#{labels['pages.registration.contactHeader']}" />
								</ice:panelGrid>
								<ice:panelGrid>
									<ice:panelGroup>
										<ice:panelGrid border="0" columns="3">
											<ice:outputLabel for="assistant_email"
												value="#{labels['person.eMail']}" />
											<ice:inputText id="assistant_email"
												value="#{loginHandler.newUser.person.assistant.email}"
												required="#{loginHandler.newUser.person.requiredFields['email']}"
												partialSubmit="true">
												<f:validator
													validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
												<f:attribute name="dObject"
													value="#{loginHandler.newUser.person.assistant}" />
											</ice:inputText>
											<ice:message for="assistant_email" id="assistant_eMailError" styleClass="errorMsg"/>
											<ice:outputLabel for="assistant_phone"
												value="#{labels['person.phone']}" />
											<ice:inputText id="assistant_phone"
												value="#{loginHandler.newUser.person.assistant.phone}"
												required="#{loginHandler.newUser.person.requiredFields['phone']}"
												partialSubmit="true">
												<f:validator
													validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
												<f:attribute name="dObject"
													value="#{loginHandler.newUser.person.assistant}" />
											</ice:inputText>
											<ice:message for="assistant_phone" id="assistant_phoneError" styleClass="errorMsg"/>
											<ice:outputLabel for="assistant_mobile"
												value="#{labels['person.mobile']}" />
											<ice:inputText id="assistant_mobile"
												value="#{loginHandler.newUser.person.assistant.mobile}"
												required="#{loginHandler.newUser.person.requiredFields['mobile']}"
												partialSubmit="true">
												<f:validator
													validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
												<f:attribute name="dObject"
													value="#{loginHandler.newUser.person.assistant}" />
											</ice:inputText>
											<ice:message for="assistant_mobile"
												id="assistant_mobileError" styleClass="errorMsg"/>
											<ice:outputLabel for="assistant_fax"
												value="#{labels['person.fax']}" />
											<ice:inputText id="assistant_fax"
												value="#{loginHandler.newUser.person.assistant.fax}"
												required="#{loginHandler.newUser.person.requiredFields['fax']}"
												partialSubmit="true">
												<f:validator
													validatorId="de.randi2.jsf.validators.RANDI2_VALIDATOR" />
												<f:attribute name="dObject"
													value="#{loginHandler.newUser.person.assistant}" />
											</ice:inputText>
											<ice:message for="assistant_fax" id="assistant_faxError" styleClass="errorMsg"/>
										</ice:panelGrid>
									</ice:panelGroup>
								</ice:panelGrid>
							</ice:panelGrid>
						</ice:panelGroup>
						<ice:panelGrid border="0" columns="3"
							rendered="#{loginHandler.trialSitesAC.objectSelected}">
							<f:facet name="header">
								<ice:outputText
									value="#{labels['pages.registration.confirmationHeader']}" />
							</f:facet>
							<ice:outputLabel for="tsPassword"
								value="#{labels['pages.registration.trialSitePassword']}" />
							<ice:inputSecret id="tsPassword"
								value="#{loginHandler.tsPassword}"
								effect="#{registerPage.effect}" />
							<ice:message for="tsPassword" id="tsPasswordError" styleClass="errorMsg"/>
						</ice:panelGrid>
					</ice:panelTab>
				</ice:panelTabSet>
				<ice:panelGrid border="0" columns="4">
					<ice:commandButton id="submitButton" type="submit"
						value="#{labels['buttons.register']}"
						action="#{loginHandler.registerUser}" />
					<ice:commandButton immediate="true"
						value="#{labels['buttons.cancel']}"
						actionListener="#{registerPage.cancel}" />
					<ice:panelGroup style="margin-left:250px;">
						<ice:messages globalOnly="true" showDetail="true"
							showSummary="true" tooltip="true" layout="table" errorClass="errorMsg"/>
						<ice:outputConnectionStatus />
					</ice:panelGroup>
				</ice:panelGrid>
			</ice:form>
		</f:facet>
		<f:facet name="south">
			<ice:panelGrid columns="2" width="100%">
				<!-- copyright and company stuff -->
				<ice:panelGroup>
					<table width="100%" cellpadding="0" cellspacing="0">
						<tr>
							<td align="center"><ice:outputText
								value="&#169; #{randi2.year} RANDI2 Development Team.
							&#160; &#8226; &#160;" /><ice:outputLink
								value="#{randi2.website1}" target="_blank">
								<ice:outputText value="#{randi2.website1}" />
							</ice:outputLink></td>
						</tr>
					</table>
				</ice:panelGroup>
			</ice:panelGrid>
		</f:facet>
	</ice:panelBorder></div>
	</div>
</h:body>
</html>